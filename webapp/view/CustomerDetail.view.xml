<mvc:View
    controllerName="com.golive.erbakir.zerbakiregitim.controller.CustomerDetail"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:table="sap.ui.table"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
>
    <Page
        id="id_cusomterdetail_page"
        title="{oDetailViewModel>/title}"
    >
        <content>
            <Panel
                headerText="Müşteri Bilgileri"
                class="sapUiResponsiveMargin"
                width="auto"
                expandable="true"
                expanded="true"
            >
                <headerToolbar>
                    <Toolbar>
                        <Title text="Müşteri Bilgileri" />
                        <ToolbarSpacer />
                        <Button
                            id="createSalesOrderButton"
                            text="Sipariş Oluştur"
                            type="Emphasized"
                            icon="sap-icon://cart-3"
                            press="onCreateSalesOrder"
                        />
                    </Toolbar>
                </headerToolbar>
                <content>
                    <f:SimpleForm
                        id="customerDetailsForm"
                        editable="false"
                        layout="ResponsiveGridLayout"
                        labelSpanXL="3"
                        labelSpanL="3"
                        labelSpanM="3"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="4"
                        emptySpanL="4"
                        emptySpanM="4"
                        emptySpanS="0"
                        columnsXL="2"
                        columnsL="2"
                        columnsM="2"
                        singleContainerFullSize="false"
                    >
                        <f:content>
                            <core:Title text="" />
                            <!-- First Name -->
                            <Label text="Ad" />
                            <!-- <Text text="{customerDetailModel>/FirstName}" /> -->

                            <!-- <ObjectStatus
							
							title="{customerDetailModel>/FirstName}"
							icon="sap-icon://sys-enter-2"
                            text="{customerDetailModel>/LastName}"
							state="Success" /> -->
                            <ObjectStatus
                                title="{customerDetailModel>/FirstName}"
                                icon="sap-icon://sys-enter-2"
                                state="Success"
                            />
                            <Label text="Soyad" />
                            <Text text="{customerDetailModel>/LastName}" />

                            <!-- Customer ID -->
                            <Label text="Müşteri ID" />
                            <!-- <Text text="{customerDetailModel>/CustomerId}" /> -->

                            <ObjectStatus
                                text="{customerDetailModel>/CustomerId}"
                                icon="sap-icon://information"
                                state="Information"
                            />

                            <core:Title text="" />
                            <!-- Email -->
                            <Label text="Email" />
                            <Text text="{customerDetailModel>/Email}" />

                            <!-- City -->
                            <Label text="Şehir" />
                            <Text text="{customerDetailModel>/City}" />

                            <!-- Country -->
                            <Label text="Ülke" />
                            <Text
                                text="{
                                path:'customerDetailModel>/Country', 
                                formatter:'.formatter.formatUlke'
                                }"
                            />
                        </f:content>
                    </f:SimpleForm>
                </content>
            </Panel>

            <List
                id="ordersList"
                class="sapUiResponsiveMargin"
                width="auto"
                items="{orderListModel>/orders}"
                busy="{oDetailViewModel>/orderListBusy}"
                noDataText="Bu müşteriye ait sipariş bulunamadı."
            >
                <headerToolbar>
                    <Toolbar>
                        <Title
                            text="Müşteri Siparişleri ({oDetailViewModel>/orderCount})"
                        />
                    </Toolbar>
                </headerToolbar>
                <items>
                    <ObjectListItem
                        type="Navigation"
                        press=".onOrderPress"
                        title="Sipariş No: {orderListModel>Vbeln}"
                        intro="{orderListModel>Description}"
                    >
                        <attributes>
                            <ObjectAttribute
                                title="Sipariş Tarihi"
                                text="{
                                    path: 'orderListModel>OrderDate',
                                    type: 'sap.ui.model.type.Date',
                                    formatOptions: {
                                        style: 'medium',
                                        strictParsing: true
                                    }
                                }"
                            />
                        </attributes>
                    </ObjectListItem>
                </items>
            </List>


                 <Panel
                headerText="Müşteri Siparişleri ({oDetailViewModel>/orderCount})"
                class="sapUiResponsiveMargin"
                width="auto"
                expandable="true"
                expanded="true"
                busy="{oDetailViewModel>/orderListBusy}"
            >
                <content>
                    <VBox items="{orderListModel>/orders}">
                        <items>
                            <Panel
                                expandable="true"
                                expanded="false"
                                class="sapUiSmallMarginBottom"
                            >
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="Sipariş No: {orderListModel>Vbeln}" />
                                        <Text text="{orderListModel>Description}" class="sapUiTinyMarginBegin"/>
                                        <ToolbarSpacer/>
                                        <VBox alignItems="End" class="sapUiSmallMarginEnd">
                                            <Label text="Sipariş Tarihi" design="Bold"/>
                                            <Text
                                                text="{
                                                    path: 'orderListModel>OrderDate',
                                                    type: 'sap.ui.model.type.Date',
                                                    formatOptions: {
                                                        style: 'medium',
                                                        strictParsing: true
                                                    }
                                                }"
                                            />
                                        </VBox>
                                    </Toolbar>
                                </headerToolbar>
                                <content>
                                    <Table
                                        items="{orderListModel>GetOrderListItemSet/results}"
                                        noDataText="Bu siparişe ait kalem bulunamadı."
                                        class="sapUiTinyMarginTopBottom"
                                    >
                                        <columns>
                                            <Column width="6rem">
                                                <Text text="Kalem No" />
                                            </Column>
                                            <Column>
                                                <Text text="Ürün ID" />
                                            </Column>
                                            <Column hAlign="End" width="8rem">
                                                <Text text="Miktar" />
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem>
                                                <cells>
                                                    <Text text="{orderListModel>Posnr}" />
                                                    <Text text="{orderListModel>ProductId}" />
                                                    <ObjectNumber
                                                        number="{
                                                            path: 'orderListModel>Quantity',
                                                            type: 'sap.ui.model.type.Float',
                                                            formatOptions: {
                                                                minFractionDigits: 3,
                                                                maxFractionDigits: 3
                                                            }
                                                        }"
                                                        unit=""
                                                        textAlign="End"
                                                    />
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                    </content>
                            </Panel>
                        </items>
                    </VBox>
                </content>
            </Panel>
        </content>
    </Page>
</mvc:View>
